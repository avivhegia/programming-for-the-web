<!DOCTYPE html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        let kit_price=0;
        let wood_cuts=0;
        let surface_area=0;
    $(document).ready(function() {
        $('#calculate').click(calculate);

function calculate(){    
       let outer_length=($('#outer_length').val());
       let reservoir_outer_length
       kit_price=0;
       wood_cuts=0;
       surface_area=0;

       switch (outer_length) {
            case "270":
                    outer_length = 270
                    no_of_plants=54
                break;
                case "215":
                    outer_length=215
                    no_of_plants=49
                break;
}
        $('#material-item-list').empty();
        clean_text_area()
        
        add_material('20mm-tooth-tap',1)
        add_material('20mm-90-degrees-teeth-connector',2)
        add_material('23mm-transparent-pipe',1)
        add_material('104-water-pump-2000lh',1)
        add_material('upvc-pipe-end-cap-110mm-diameter',1)

        if (outer_length==270){
        add_material('white-upvc-pipe-110mm-diameter-2-4m-length-with-11-holes',2)
        add_material('white-upvc-pipe-110mm-diameter-2-4m-length-with-11-holes',1,'. מקוצר לאורך 193 ס"מ','. מקוצר לאורך 193 ס"מ')
        }
        else {
        add_material('white-upvc-pipe-110mm-diameter-2-4m-length-with-11-holes',2,'. מקוצר לאורך 186 ס"מ','. מקוצר לאורך 186 ס"מ')
        add_material('white-upvc-pipe-110mm-diameter-2-4m-length-with-11-holes',1,'. מקוצר לאורך 166 ס"מ','. מקוצר לאורך 166 ס"מ')
        }

        add_wood('upvc-pipe-50-dia-no-holes',1,40)
        add_material('upvc-pipe-110-dia-0-5m-length-no-holes',2,25,'מקוצר לאורך 25 ס"מ','מקוצר לאוך 25 ס"מ')
        add_material('110mm-o-ring',12)
        add_material('90-degree-angle-110mm-pipe',5)
        add_material('female-female-110mm-mufa',1)
        add_material('110-to-50-mm-connector',1)
        add_material('50mm-o-ring',1)
        add_material('plastic-hook-for-110mm-pipe',6)
        add_material('large-planting-cone',no_of_plants-21)
        add_material('2-inch-net-cup',26)
        add_material('hdpe-water-pipe-20mm',200/100)
        add_material('auto-refill-vertical-float',1)
        add_material('half-tzol-omega',1)
        add_material('110x50x2-insulation-styrofoam',2)
        add_material('50x128x4-cm-styrofoam-with-18-2-inch-holes',2)
        add_material('2-5m-wide-pvc-tarp',1.3)

       if ($('#treated').is(':checked')) {
        add_wood('3x15-treated-wood',4,175,", קורה א'")
        add_wood('3x15-treated-wood',4,51.5,", קורה ב'")
        add_wood('5x10-treated-wood',2,184,", קורה ג'")
        add_wood('3-5x7-5-treated-wood',5,184,", קורה ד'")
        add_wood('3-5x7-5-treated-wood',2,58,", קורה ה'")
        add_wood('2x5-treated-wood',5,29,", קורה ו'")
       }
       else {
        add_wood('3x15-untreated-wood',4,175," קורה א'")
        add_wood('3x15-untreated-wood',4,51.5," קורה ב'")
        add_wood('5x10-untreated-wood',2,184," קורה ג'")
        add_wood('3-5x7-5-untreated-wood',5,184," קורה ד'")
        add_wood('3-5x7-5-untreated-wood',2,58," קורה ה'")
        add_wood('2x5-untreated-wood',5,29," קורה ו'")
       }
       add_material('wood-cut',wood_cuts)
       add_material('4x70-wood-screw',40)
       add_material('5x80-wood-screw',10)
       add_material('4x60-wood-screw',10)
       add_material('4x40-wood-screw',20)
       add_material('5x40-wood-screw',10)
       add_material('25mm-pah-pah-screw',30)
       add_material('quick-release-garden-hose-male-connector',1)
       

       $('#price').text('');
       kit_price=Math.round(kit_price*100)/100;
       kit_price=Intl.NumberFormat('he-IR', { style: 'currency', currency: 'ILS' }).format(kit_price);
       $('#price').text(kit_price);

        $('#BOM').text('');
        let BOM=`
        <p> מס' הצמחים במערכת: ${no_of_plants} </p>
        <p>אורך חיצוני: ${outer_length} ס"מ</p>
        <p>סה"כ פני שטח עץ לצביעה: ${surface_area} מ"ר</p>
        `
        $('#BOM').prepend(BOM)
    }
    console.log(BOM)
    });
    </script>
</head>

<body>
<form class =  "calculator-form-div">
    אורך חיצוני
    <select class = "calculator-dropdown-field" id = "outer_length"> 
        <option selected = "selected" class = "calculator-text-input" value = "270">270 ס"מ (דגם א)</option>
        <option  class = "calculator-text-input" value = "215">215 ס"מ (דגם ב)</option>
    </select> <br/>
    עץ מחוטא
    <input type = "radio" id = "treated" name="yesno"/><br/>
    עץ לא מחוטא
    <input type = "radio" id = "untreated" name="yesno" checked/>
    <br/>
    <button id='calculate' class = "calculator-calculate-button" type = "button">חשב</button> <br/><br/>
    מחיר הקיט:
        <h3 class = "kit-price" id = "price"></h3><br/>
        <div id = "BOM"></div> <br/><br/>
</form>
</body>